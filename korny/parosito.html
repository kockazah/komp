<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>√Ållatvil√°g Csoportos√≠t√≥</title>
<style>
    :root {
        --primary: #2d5a27; /* Erd≈ëz√∂ld */
        --bg-color: #e8f5e9; /* Halv√°nyz√∂ld h√°tt√©r */
        --panel-bg: #ffffff;
        --text-color: #1b3022;
        --border-color: #c8e6c9;
        --radius: 15px;
        --shadow: 0 8px 16px rgba(0,0,0,0.1);
        --success: #4caf50;
        --warning: #ffa000;
    }

    body { 
        font-family: 'Segoe UI', Roboto, sans-serif; 
        margin:0; padding:0; 
        background-color: var(--bg-color); 
        background-image: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        color: var(--text-color); 
        min-height: 100vh;
    }
    
    #quiz-container { 
        display:flex; flex-direction:row; max-width:1400px; margin: 20px auto; 
        background: rgba(255, 255, 255, 0.9); border-radius: var(--radius); 
        box-shadow: var(--shadow); overflow: hidden; height: calc(100vh - 40px);
        backdrop-filter: blur(5px);
    }
    
    #quiz-container .left { width:20%; border-right:2px solid var(--border-color); padding: 25px; overflow-y:auto; background-color: rgba(255,255,255,0.5); }
    #quiz-container .right { width:80%; display:flex; flex-direction:column; padding: 25px; overflow-y:hidden; }
    
    .category-column {
        flex: 1; min-width: 180px;
        background: white; border: 2px solid var(--border-color);
        border-radius: var(--radius); display: flex; flex-direction: column; padding: 10px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .category-column h3 { text-align: center; margin: 5px 0 15px 0; color: var(--primary); font-size: 1rem; border-bottom: 2px solid #eee; padding-bottom: 5px; }
    
    .drop-area { flex: 1; display: flex; flex-direction: column; gap: 10px; min-height: 150px; }

    .source-cards-area { 
        background: rgba(255,255,255,0.8); padding: 20px; border-radius: var(--radius); 
        display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-bottom: 20px;
        border: 2px dashed var(--border-color);
    }

    .draggable-card { 
        background: var(--primary); color: white; padding: 10px 15px; 
        border-radius: 8px; cursor: pointer; font-size: 0.9rem; font-weight: bold;
        box-shadow: 0 4px 0 #1b3d1a; transition: all 0.2s;
    }
    .draggable-card:active { transform: translateY(2px); box-shadow: 0 2px 0 #1b3d1a; }
    .draggable-card.selected { background-color: var(--warning); box-shadow: 0 4px 0 #c67c00; color: #000; }

    .btn-finish { background-color: var(--success); color: white; padding:15px 30px; border-radius: 50px; font-size: 1.1rem; border: none; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3); }
    .btn-finish:hover { transform: scale(1.05); background-color: #43a047; }

    #resultPage { display:none; padding:60px; text-align:center; max-width: 600px; margin: 100px auto; background: white; border-radius: var(--radius); box-shadow: var(--shadow); }

    .drop-zones-container { display: flex; gap: 10px; flex: 1; overflow-x: auto; padding-bottom: 10px; }

    @media (max-width: 1024px) {
        #quiz-container { flex-direction: column; height: auto; }
        #quiz-container .left, #quiz-container .right { width: 100%; }
        .drop-zones-container { flex-wrap: wrap; }
    }
</style>
</head>
<body>

<div id="quiz-container">
  <div class="left">
      <h2 style="color: var(--primary)">Rendszertan</h2>
      <p>Rendezd el a k√°rty√°kat a megfelel≈ë oszt√°lyokba!</p>
      <div style="font-size: 0.85rem; color: #666; margin-top: 20px;">
          <b>Tipp:</b> Haszn√°ld a "h√∫zd √©s ejtsd" m√≥dszert, vagy kattints a sz√≥ra, majd a c√©lter√ºletre!
      </div>
  </div>
  <div class="right">
    <div id="quiz" style="height: 100%; display: flex; flex-direction: column;"></div>
  </div>
</div>

<div id="resultPage">
  <h1 style="color: var(--primary)">Sz√©p munka!</h1>
  <div id="resultText"></div>
  <button onclick="location.reload()" class="btn-finish" style="margin-top: 20px;">√öj j√°t√©k</button>
</div>

<script>
const quizData = {
    categories: [
        { id: "halak", name: "Halak üêü" },
        { id: "keteltuek", name: "K√©t√©lt≈±ek üê∏" },
        { id: "hullok", name: "H√ºll≈ëk üêç" },
        { id: "madarak", name: "Madarak üê¶" },
        { id: "emlosok", name: "Eml≈ës√∂k ü¶å" }
    ],
    items: [
    { szo: "Ponty", cat: "halak" }, { szo: "Harcsa", cat: "halak" }, { szo: "Keszeg", cat: "halak" }, { szo: "Csuka", cat: "halak" }, { szo: "C√°pa", cat: "halak" }, { szo: "Lazac", cat: "halak" },
    { szo: "Kecskeb√©ka", cat: "keteltuek" }, { szo: "Barna varangy", cat: "keteltuek" }, { szo: "Foltos szalamandra", cat: "keteltuek" }, { szo: "Tarajos g≈ëte", cat: "keteltuek" }, { szo: "Levelib√©ka", cat: "keteltuek" }, { szo: "Z√∂ld varangy", cat: "keteltuek" },
    { szo: "Mocs√°ri tekn≈ës", cat: "hullok" }, { szo: "V√≠zisikl√≥", cat: "hullok" }, { szo: "Keresztes vipera", cat: "hullok" }, { szo: "F√ºrge gy√≠k", cat: "hullok" }, { szo: "Krokodil", cat: "hullok" }, { szo: "Kam√©leon", cat: "hullok" },
    { szo: "Feh√©r g√≥lya", cat: "madarak" }, { szo: "Sz√©ncinege", cat: "madarak" }, { szo: "Fekete rig√≥", cat: "madarak" }, { szo: "Eger√©sz√∂lyv", cat: "madarak" }, { szo: "Pingvin", cat: "madarak" }, { szo: "Fecske", cat: "madarak" },
    { szo: "V√∂r√∂s r√≥ka", cat: "emlosok" }, { szo: "Mezei ny√∫l", cat: "emlosok" }, { szo: "G√≠mszarvas", cat: "emlosok" }, { szo: "Vakond", cat: "emlosok" }, { szo: "Delfin", cat: "emlosok" }, { szo: "S√ºn", cat: "emlosok" }
]
};

let selectedPoint = null;

function init() {
    const quizWrap = document.getElementById("quiz");
    const container = document.createElement("div");
    container.style.display = "flex";
    container.style.flexDirection = "column";
    container.style.height = "100%";

    const sourceArea = document.createElement("div");
    sourceArea.className = "source-cards-area";
    sourceArea.id = "source-area";
    sourceArea.ondrop = drop;
    sourceArea.ondragover = e => e.preventDefault();

    const zonesContainer = document.createElement("div");
    zonesContainer.className = "drop-zones-container";

    quizData.categories.forEach(cat => {
        const col = document.createElement("div");
        col.className = "category-column";
        col.innerHTML = `<h3>${cat.name}</h3>`;
        const dropArea = document.createElement("div");
        dropArea.className = "drop-area";
        dropArea.dataset.catId = cat.id;
        dropArea.ondrop = drop;
        dropArea.ondragover = e => e.preventDefault();
        dropArea.onclick = () => handleZoneClick(dropArea);
        col.appendChild(dropArea);
        zonesContainer.appendChild(col);
    });

    [...quizData.items].sort(() => Math.random() - 0.5).forEach((item, i) => {
        const card = document.createElement("div");
        card.className = "draggable-card";
        card.id = `c-${i}`;
        card.textContent = item.szo;
        card.draggable = true;
        card.dataset.correctCat = item.cat;
        card.onclick = (e) => { e.stopPropagation(); handleCardClick(card); };
        card.ondragstart = (e) => { e.dataTransfer.setData("text", e.target.id); handleCardClick(card); };
        sourceArea.appendChild(card);
    });

    const foot = document.createElement("div");
    foot.style.textAlign = "right"; foot.style.marginTop = "20px";
    foot.innerHTML = `<button class="btn-finish" onclick="finishQuiz()">K√©szen vagyok!</button>`;

    container.appendChild(sourceArea);
    container.appendChild(zonesContainer);
    container.appendChild(foot);
    quizWrap.appendChild(container);
}

function handleCardClick(card) {
    document.querySelectorAll('.draggable-card').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    selectedPoint = card;
}

function handleZoneClick(zone) {
    if (selectedPoint) {
        zone.appendChild(selectedPoint);
        selectedPoint.classList.remove('selected');
        selectedPoint = null;
    }
}

function drop(e) {
    e.preventDefault();
    const id = e.dataTransfer.getData("text");
    const card = document.getElementById(id);
    let target = e.target;
    while(target && !target.classList.contains('drop-area') && !target.classList.contains('source-cards-area')) {
        target = target.parentElement;
    }
    if(target) target.appendChild(card);
}

function finishQuiz() {
    let score = 0;
    const total = quizData.items.length;
    document.querySelectorAll('.drop-area').forEach(zone => {
        const catId = zone.dataset.catId;
        zone.querySelectorAll('.draggable-card').forEach(card => {
            if(card.dataset.correctCat === catId) score++;
        });
    });

    document.getElementById("quiz-container").style.display = "none";
    document.getElementById("resultPage").style.display = "block";
    const percent = Math.round(score/total*100);
    document.getElementById("resultText").innerHTML = `
        <div style="font-size: 4rem; font-weight: bold; color: var(--primary);">${percent}%</div>
        <p style="font-size: 1.2rem;">${total} √°llatb√≥l <b>${score}</b> ker√ºlt a hely√©re.</p>
    `;
}

window.onload = init;
</script>
</body>
</html>